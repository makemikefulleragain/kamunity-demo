(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[556],{895:function(e,a,s){Promise.resolve().then(s.bind(s,1824))},1824:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return p}});var t=s(7437),r=s(2265),n=s(1474),l=s(757),i=s(6334),o=s(4818),d=s(3880),c=s(5390),m=e=>{let{onUploadComplete:a,maxFileSize:s,acceptedTypes:n}=e,[l,i]=(0,r.useState)(!1),o=e=>{e.preventDefault(),e.stopPropagation(),"dragenter"===e.type||"dragover"===e.type?i(!0):"dragleave"===e.type&&i(!1)};return(0,t.jsx)("div",{className:"border-2 border-dashed rounded-lg p-8 text-center transition-colors ".concat(l?"border-primary-500 bg-primary-50":"border-gray-300 hover:border-primary-400"),onDragEnter:o,onDragLeave:o,onDragOver:o,onDrop:e=>{if(e.preventDefault(),e.stopPropagation(),i(!1),e.dataTransfer.files&&e.dataTransfer.files[0]){let t=e.dataTransfer.files[0];t.size<=s&&a(t)}},children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("div",{className:"text-4xl",children:"\uD83D\uDCCE"}),(0,t.jsxs)("div",{children:[(0,t.jsx)(c.xv,{variant:"body-large",className:"mb-2",children:"Drop your file here or click to browse"}),(0,t.jsxs)(c.xv,{variant:"body-small",color:"muted",children:["Max size: ",Math.round(s/1024/1024),"MB"]})]}),(0,t.jsx)("input",{type:"file",onChange:e=>{if(e.target.files&&e.target.files[0]){let t=e.target.files[0];t.size<=s&&a(t)}},accept:n.join(","),className:"hidden",id:"file-upload"}),(0,t.jsx)("label",{htmlFor:"file-upload",className:"inline-flex items-center px-4 py-2 bg-primary-500 text-white rounded-lg hover:bg-primary-600 cursor-pointer transition-colors",children:"Choose File"})]})})},u=s(3448);let x=e=>{let{id:a,content:s,author:d,createdAt:c,conversationId:m,reactions:x=[],uploads:h=[],onReact:p,onRemoveReaction:g,onReply:v,className:y,showActions:j=!0,currentUserId:b="current-user"}=e,[f,D]=(0,r.useState)(!1),N=s.length>300,w=e=>{switch(e){case"image":return"\uD83D\uDDBC️";case"document":return"\uD83D\uDCC4";case"video":return"\uD83C\uDFA5";case"audio":return"\uD83C\uDFB5";default:return"\uD83D\uDCCE"}},C=e=>"2.3 MB",k=d.id===b;return(0,t.jsx)(l.Zb,{className:(0,u.cn)("transition-all duration-200 hover:shadow-sm",y),children:(0,t.jsx)(l.aY,{className:"p-4",children:(0,t.jsxs)(n.kC,{align:"start",gap:"md",children:[(0,t.jsx)("div",{className:(0,u.cn)("w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0 text-sm font-medium",k?"bg-primary-100 text-primary-700":"bg-neutral-100 text-neutral-700"),children:d.avatarUrl?(0,t.jsx)("img",{src:d.avatarUrl,alt:d.name,className:"w-full h-full rounded-full object-cover"}):d.name.split(" ").map(e=>e.charAt(0)).join("").toUpperCase().slice(0,2)}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsxs)(n.kC,{align:"center",className:"mb-2",children:[(0,t.jsx)(o.xv,{weight:"medium",className:(0,u.cn)("mr-2",k?"text-primary-700":"text-neutral-900"),children:d.name}),(0,t.jsx)(o.xv,{variant:"body-small",color:"muted",children:new Date(c).toLocaleString()}),k&&(0,t.jsx)("span",{className:"ml-2 px-2 py-1 text-xs bg-primary-100 text-primary-700 rounded-full",children:"You"})]}),(0,t.jsxs)("div",{className:"mb-3",children:[(0,t.jsx)(o.xv,{className:"text-neutral-700 leading-relaxed",children:N&&!f?"".concat(s.slice(0,300),"..."):s}),N&&(0,t.jsx)(i.z,{variant:"ghost",size:"sm",onClick:()=>D(!f),className:"mt-1 p-0 h-auto text-primary-600 hover:text-primary-700",children:f?"Show less":"Show more"})]}),h.length>0&&(0,t.jsx)("div",{className:"mb-3 space-y-2",children:h.map(e=>(0,t.jsxs)("div",{className:"inline-flex items-center px-3 py-2 bg-neutral-50 border border-neutral-200 rounded-lg mr-2 hover:bg-neutral-100 transition-colors cursor-pointer",children:[(0,t.jsx)("span",{className:"mr-2",children:w(e.fileType)}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)(o.xv,{variant:"body-small",className:"text-neutral-700 truncate",children:e.filename}),(0,t.jsx)(o.xv,{variant:"caption",color:"muted",children:C(e.filename)})]}),(0,t.jsx)(i.z,{variant:"ghost",size:"sm",className:"ml-2 p-1 h-auto text-neutral-500 hover:text-neutral-700",title:"Download",children:"⬇️"})]},e.id))}),(0,t.jsx)("div",{className:"mb-3",children:(0,t.jsx)("div",{className:"text-sm text-gray-500",children:"\uD83D\uDC4D \uD83D\uDCA1 \uD83C\uDFAF reactions coming soon!"})}),j&&(0,t.jsxs)(n.kC,{align:"center",gap:"sm",children:[(0,t.jsx)(i.z,{variant:"ghost",size:"sm",onClick:()=>{null==v||v(a)},className:"text-neutral-500 hover:text-neutral-700 p-1 h-auto",children:"\uD83D\uDCAC Reply"}),(0,t.jsx)(i.z,{variant:"ghost",size:"sm",className:"text-neutral-500 hover:text-neutral-700 p-1 h-auto",title:"Share message",children:"\uD83D\uDD17 Share"}),k&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.z,{variant:"ghost",size:"sm",className:"text-neutral-500 hover:text-neutral-700 p-1 h-auto",title:"Edit message",children:"✏️ Edit"}),(0,t.jsx)(i.z,{variant:"ghost",size:"sm",className:"text-red-500 hover:text-red-700 p-1 h-auto",title:"Delete message",children:"\uD83D\uDDD1️ Delete"})]})]})]})]})})})};var h=s(611),p=e=>{var a,s,c;let{params:p}=e,[g,v]=(0,r.useState)(null),[y,j]=(0,r.useState)([]),[b,f]=(0,r.useState)([]),[D,N]=(0,r.useState)(!0),[w,C]=(0,r.useState)(!1),[k,z]=(0,r.useState)("");(0,r.useEffect)(()=>{let e={id:p.id,name:"Sustainable Urban Farming",purpose:"Creating resilient local food systems through community gardens and urban agriculture",description:"A collaborative space for planning, sharing resources, and coordinating urban farming initiatives across our community. We focus on practical solutions, knowledge sharing, and building connections between gardeners.",createdAt:new Date(Date.now()-2592e6),updatedAt:new Date(Date.now()-72e5),clubId:"club-1",status:"active",isPrivate:!1,maxMembers:50,tags:["urban-farming","sustainability","community-gardens","food-security"],pinnedContent:"\uD83C\uDF31 Welcome! Please introduce yourself and share your gardening experience. Check out our resource library in the uploads section.",lastActivity:new Date(Date.now()-18e5),messageCount:127,memberCount:23,club:{id:"club-1",name:"Urban Gardens Initiative",community:{id:"comm-1",name:"Climate Action Network"}}},a=[{id:"upload-1",filename:"garden-layout-plan.pdf",originalName:"Community Garden Layout Plan.pdf",fileType:"document",fileSize:2048e3,mimeType:"application/pdf",storageLocation:"/uploads/garden-layout-plan.pdf",moderationStatus:"approved",createdAt:new Date(Date.now()-1728e5),updatedAt:new Date(Date.now()-1728e5),uploaderId:"user-1",description:"Proposed layout for the new community garden on 5th Street",tags:["garden-design","layout","planning"],isPublic:!0,focusRoomId:p.id,uploader:{id:"user-1",name:"Sarah Chen",email:"sarah@example.com",avatarUrl:void 0}},{id:"upload-2",filename:"soil-test-results.jpg",originalName:"Soil Test Results - March 2024.jpg",fileType:"image",fileSize:1024e3,mimeType:"image/jpeg",storageLocation:"/uploads/soil-test-results.jpg",moderationStatus:"approved",createdAt:new Date(Date.now()-864e5),updatedAt:new Date(Date.now()-864e5),uploaderId:"user-2",description:"Latest soil test results showing pH and nutrient levels",tags:["soil-testing","data","analysis"],isPublic:!0,focusRoomId:p.id,uploader:{id:"user-2",name:"Marcus Johnson",email:"marcus@example.com",avatarUrl:void 0}}],s=[{id:"msg-1",content:"Great work on the soil testing, Marcus! The pH levels look perfect for tomatoes and peppers. Should we start planning the spring planting schedule?",createdAt:new Date(Date.now()-72e5),authorId:"user-1",conversationId:"conv-1",author:{id:"user-1",name:"Sarah Chen",email:"sarah@example.com",avatarUrl:void 0}},{id:"msg-2",content:"Absolutely! I was thinking we could do a community planting day next Saturday. I can bring seedlings from my greenhouse.",createdAt:new Date(Date.now()-36e5),authorId:"user-2",conversationId:"conv-1",author:{id:"user-2",name:"Marcus Johnson",email:"marcus@example.com",avatarUrl:void 0}},{id:"msg-3",content:"Count me in! I can help with the layout setup. The new garden design looks amazing in the PDF you shared, Sarah.",createdAt:new Date(Date.now()-18e5),authorId:"user-3",conversationId:"conv-1",author:{id:"user-3",name:"Elena Rodriguez",email:"elena@example.com",avatarUrl:void 0}}];v(e),j(a),f(s),N(!1)},[p.id]);let S=()=>{if(!k.trim())return;let e={id:"msg-".concat(Date.now()),content:k,createdAt:new Date,authorId:"current-user",conversationId:"conv-1",author:{id:"current-user",name:"You",email:"you@example.com",avatarUrl:void 0}};f(a=>[...a,e]),z("")};return D?(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-primary-50 via-white to-secondary-50 flex items-center justify-center",children:(0,t.jsx)(o.xv,{children:"Loading focus room..."})}):g?(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-primary-50 via-white to-secondary-50",children:(0,t.jsxs)(n.W2,{size:"full",className:"py-6",children:[(0,t.jsx)(n.$0,{spacing:"sm",children:(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("div",{className:"flex items-center text-sm text-neutral-600 mb-4",children:(0,t.jsxs)(o.xv,{variant:"body-small",color:"muted",children:[null===(s=g.club)||void 0===s?void 0:null===(a=s.community)||void 0===a?void 0:a.name," → ",null===(c=g.club)||void 0===c?void 0:c.name," → Focus Room"]})}),(0,t.jsxs)(n.kC,{justify:"between",align:"start",className:"mb-4",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)(n.kC,{align:"center",className:"mb-2",children:[(0,t.jsx)(o.X6,{level:1,className:"text-neutral-900 mr-3",children:g.name}),(0,t.jsx)("span",{className:(0,u.cn)("px-2 py-1 text-xs font-medium rounded-full border","active"===g.status?"bg-green-100 text-green-700 border-green-200":"dormant"===g.status?"bg-yellow-100 text-yellow-700 border-yellow-200":"bg-gray-100 text-gray-700 border-gray-200"),children:g.status}),g.isPrivate&&(0,t.jsx)("span",{className:"ml-2 px-2 py-1 text-xs font-medium rounded-full bg-purple-100 text-purple-700 border border-purple-200",children:"Private"})]}),(0,t.jsx)(o.xv,{className:"text-neutral-700 mb-3",children:g.purpose}),g.description&&(0,t.jsx)(o.xv,{variant:"body-small",color:"muted",className:"mb-3",children:g.description}),(0,t.jsxs)(n.kC,{align:"center",gap:"md",className:"mb-3",children:[(0,t.jsx)("div",{className:"flex items-center",children:(0,t.jsxs)(o.xv,{variant:"body-small",color:"muted",className:"mr-1",children:["\uD83D\uDC65 ",g.memberCount," members"]})}),(0,t.jsx)("div",{className:"flex items-center",children:(0,t.jsxs)(o.xv,{variant:"body-small",color:"muted",className:"mr-1",children:["\uD83D\uDCAC ",g.messageCount," messages"]})}),(0,t.jsx)("div",{className:"flex items-center",children:(0,t.jsxs)(o.xv,{variant:"body-small",color:"muted",className:"mr-1",children:["\uD83D\uDCC1 ",y.length," uploads"]})}),(0,t.jsx)("div",{className:"flex items-center",children:(0,t.jsxs)(o.xv,{variant:"body-small",color:"muted",children:["\uD83D\uDD52 Active ",Math.floor((Date.now()-g.lastActivity.getTime())/6e4)," min ago"]})})]}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2 mb-4",children:g.tags.map(e=>(0,t.jsx)("span",{className:"px-2 py-1 text-xs bg-neutral-100 text-neutral-700 rounded-full",children:e},e))})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(i.z,{variant:"primary",size:"sm",children:"Join Room"}),(0,t.jsx)(i.z,{variant:"outline",size:"sm",children:"Invite Members"})]})]}),g.pinnedContent&&(0,t.jsx)("div",{className:"bg-primary-50 border border-primary-200 rounded-lg p-4 mb-6",children:(0,t.jsxs)(o.xv,{variant:"body-small",className:"text-primary-800",children:["\uD83D\uDCCC ",g.pinnedContent]})})]})}),(0,t.jsxs)(n.rj,{cols:12,gap:"lg",children:[(0,t.jsx)("div",{className:"col-span-12 lg:col-span-3",children:(0,t.jsx)(d.Z,{onFilterChange:(e,a)=>{console.log("Room filter changed:",e,a)}})}),(0,t.jsx)("div",{className:"col-span-12 lg:col-span-6",children:(0,t.jsx)("div",{className:"space-y-6",children:(0,t.jsxs)(l.Zb,{children:[(0,t.jsx)(l.Ol,{children:(0,t.jsxs)(n.kC,{justify:"between",align:"center",children:[(0,t.jsx)(l.ll,{children:"Room Discussion"}),(0,t.jsx)(i.z,{variant:"outline",size:"sm",onClick:()=>C(!0),children:"Share File"})]})}),(0,t.jsxs)(l.aY,{children:[(0,t.jsx)("div",{className:"space-y-4 mb-4 max-h-96 overflow-y-auto",children:b.map(e=>{var a,s,r;return(0,t.jsx)(x,{id:e.id,content:e.content,createdAt:e.createdAt,conversationId:g.id,author:{id:(null===(a=e.author)||void 0===a?void 0:a.id)||"unknown",name:(null===(s=e.author)||void 0===s?void 0:s.name)||"Unknown",avatarUrl:(null===(r=e.author)||void 0===r?void 0:r.avatarUrl)||void 0},reactions:[],uploads:[],onReact:(e,a)=>{console.log("React to message:",e,a)},onReply:e=>{console.log("Reply to message:",e)}},e.id)})}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("input",{type:"text",placeholder:"Type your message...",value:k,onChange:e=>z(e.target.value),onKeyPress:e=>"Enter"===e.key&&S(),className:"flex-1 px-3 py-2 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"}),(0,t.jsx)(i.z,{onClick:S,children:"Send"})]})]})]})})}),(0,t.jsx)("div",{className:"col-span-12 lg:col-span-3",children:(0,t.jsx)("div",{className:"space-y-6",children:(0,t.jsxs)(l.Zb,{children:[(0,t.jsx)(l.Ol,{children:(0,t.jsx)(l.ll,{children:"Recent Uploads"})}),(0,t.jsx)(l.aY,{children:(0,t.jsx)("div",{className:"space-y-4",children:0===y.length?(0,t.jsx)(o.xv,{variant:"body-small",color:"muted",className:"text-center py-4",children:"No uploads yet"}):y.map(e=>{var a;return(0,t.jsxs)("div",{className:"border border-neutral-200 rounded-lg p-3",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)(o.xv,{variant:"body-small",weight:"medium",className:"text-neutral-900",children:e.originalName}),(0,t.jsxs)(o.xv,{variant:"body-small",color:"muted",children:["by ",null===(a=e.uploader)||void 0===a?void 0:a.name," • ",new Date(e.createdAt).toLocaleDateString()]})]}),(0,t.jsx)("span",{className:(0,u.cn)("px-2 py-1 text-xs rounded-full","image"===e.fileType?"bg-green-100 text-green-700":"document"===e.fileType?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700"),children:e.fileType})]}),e.description&&(0,t.jsx)(o.xv,{variant:"body-small",className:"text-neutral-700 mb-2",children:e.description}),(0,t.jsx)("div",{className:"flex flex-wrap gap-1 mb-2",children:e.tags.map(e=>(0,t.jsx)("span",{className:"px-1 py-0.5 text-xs bg-neutral-100 text-neutral-600 rounded",children:e},e))}),(0,t.jsx)("div",{className:"text-sm text-gray-500 mt-2",children:"\uD83D\uDC4D \uD83D\uDCA1 \uD83C\uDFAF reactions coming soon!"})]},e.id)})})})]})})})]}),w&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,t.jsx)("div",{className:"bg-gradient-to-r from-primary-50 to-secondary-50 p-6 rounded-t-lg",children:(0,t.jsxs)(n.kC,{justify:"between",align:"start",className:"mb-4",children:[(0,t.jsx)("div",{className:"flex-1",children:(0,t.jsx)(h.default,{variant:"inline",expression:"excited",size:"md",title:"\uD83D\uDCCE Share Something Amazing!",message:"Ready to contribute to this room? I'm excited to see what you'll share with the community!"})}),(0,t.jsx)("button",{onClick:()=>C(!1),className:"text-neutral-400 hover:text-neutral-600 transition-colors ml-4 p-1",children:(0,t.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)(o.xv,{variant:"body-large",className:"mb-2 font-medium",children:"What would you like to share? \uD83C\uDF1F"}),(0,t.jsx)(o.xv,{variant:"body-small",color:"muted",children:"Upload documents, images, or files that will help move this room's goals forward. Your contributions make a real difference!"})]}),(0,t.jsx)(m,{onUploadComplete:e=>{let a={id:Date.now().toString(),filename:e.name,originalName:e.name,fileType:e.type.startsWith("image/")?"image":"document",fileSize:e.size,mimeType:e.type,storageLocation:"/uploads/".concat(e.name),moderationStatus:"approved",createdAt:new Date,updatedAt:new Date,uploaderId:"current-user-id",tags:[],isPublic:!0};v(e=>e?{...e,uploads:[...e.uploads||[],a]}:null),C(!1)},maxFileSize:10485760,acceptedTypes:["image/*","application/pdf",".doc",".docx"]}),(0,t.jsxs)("div",{className:"mt-6 p-4 bg-primary-50 rounded-lg border border-primary-100",children:[(0,t.jsx)(o.xv,{variant:"body-small",className:"font-medium text-primary-700 mb-2",children:"\uD83D\uDCA1 Kai's Tips:"}),(0,t.jsxs)("ul",{className:"text-sm text-primary-600 space-y-1",children:[(0,t.jsx)("li",{children:"• Images and PDFs work great for sharing ideas"}),(0,t.jsx)("li",{children:"• Documents help organize thoughts and plans"}),(0,t.jsx)("li",{children:"• Keep files under 10MB for best performance"}),(0,t.jsx)("li",{children:"• Add a quick description when you upload!"})]})]})]})]})})]})}):(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-primary-50 via-white to-secondary-50 flex items-center justify-center",children:(0,t.jsx)(o.xv,{children:"Focus room not found"})})}}},function(e){e.O(0,[137,648,611,880,971,117,744],function(){return e(e.s=895)}),_N_E=e.O()}]);