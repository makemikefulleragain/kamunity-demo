(()=>{var e={};e.id=961,e.ids=[961],e.modules={399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},8893:e=>{"use strict";e.exports=require("buffer")},4770:e=>{"use strict";e.exports=require("crypto")},7702:e=>{"use strict";e.exports=require("events")},2615:e=>{"use strict";e.exports=require("http")},8791:e=>{"use strict";e.exports=require("https")},8216:e=>{"use strict";e.exports=require("net")},8621:e=>{"use strict";e.exports=require("punycode")},6162:e=>{"use strict";e.exports=require("stream")},2452:e=>{"use strict";e.exports=require("tls")},7360:e=>{"use strict";e.exports=require("url")},1568:e=>{"use strict";e.exports=require("zlib")},8359:()=>{},3739:()=>{},8745:(e,t,s)=>{"use strict";s.r(t),s.d(t,{originalPathname:()=>x,patchFetch:()=>f,requestAsyncStorage:()=>m,routeModule:()=>d,serverHooks:()=>q,staticGenerationAsyncStorage:()=>l});var r={};s.r(r),s.d(r,{GET:()=>c,POST:()=>p});var o=s(9303),u=s(8716),i=s(3131),a=s(7070);let n=(0,s(2438).eI)("https://your-project.supabase.co",process.env.SUPABASE_SERVICE_ROLE_KEY);async function p(e){try{let t=await e.json();for(let e of["name","purpose","description","requestedBy"])if(!t[e])return a.NextResponse.json({success:!1,error:`Missing required field: ${e}`},{status:400});let s={name:t.name,purpose:t.purpose,description:t.description,category:t.category||"Community Building",estimatedMembers:t.estimatedMembers||"5-15",timeCommitment:t.timeCommitment||"2-4 hours/week",skillsNeeded:t.skillsNeeded||[],expectedOutcomes:t.expectedOutcomes||[],tools:t.tools||[],tags:t.tags||[],requestedBy:t.requestedBy,requestType:t.requestType||"custom",status:"pending",requestedAt:new Date},{data:r,error:o}=await n.from("focus_rooms").insert({name:s.name,purpose:s.purpose,description:s.description,status:"active",is_private:!1,max_members:parseInt(s.estimatedMembers.split("-")[1])||15,club_id:"default-club-id"}).select().single();if(o)return a.NextResponse.json({error:"Failed to create room"},{status:500});return a.NextResponse.json({success:!0,message:"Room request submitted successfully",data:{requestId:r.id,roomId:r.id,status:"approved",room:{id:r.id,name:r.name,purpose:r.purpose,description:r.description}}})}catch(e){if(console.error("Room request error:",e),e&&"object"==typeof e&&"code"in e&&"P2002"===e.code)return a.NextResponse.json({success:!1,error:"A room with this name already exists"},{status:409});return a.NextResponse.json({success:!1,error:"Failed to submit room request. Please try again."},{status:500})}}async function c(e){try{let{searchParams:t}=new URL(e.url),s=t.get("status")||"all",r=parseInt(t.get("limit")||"50"),o=parseInt(t.get("offset")||"0"),u=n.from("focus_rooms").select("*").order("created_at",{ascending:!1}).range(o,o+r-1);"all"!==s&&(u=u.eq("status",s));let{data:i,error:p}=await u;if(p)return a.NextResponse.json({error:"Failed to fetch rooms"},{status:500});let c=i?.map(e=>({id:e.id,name:e.name,purpose:e.purpose,description:e.description,status:e.status,memberCount:e._count.members,createdAt:e.createdAt,tags:e.tags}));return a.NextResponse.json({success:!0,data:{requests:c,total:c.length,hasMore:c.length===r}})}catch(e){return console.error("Failed to fetch room requests:",e),a.NextResponse.json({success:!1,error:"Failed to fetch room requests"},{status:500})}}let d=new o.AppRouteRouteModule({definition:{kind:u.x.APP_ROUTE,page:"/api/rooms/request/route",pathname:"/api/rooms/request",filename:"route",bundlePath:"app/api/rooms/request/route"},resolvedPagePath:"C:\\dev\\kamunity-final\\src\\app\\api\\rooms\\request\\route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:m,staticGenerationAsyncStorage:l,serverHooks:q}=d,x="/api/rooms/request/route";function f(){return(0,i.patchFetch)({serverHooks:q,staticGenerationAsyncStorage:l})}}};var t=require("../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[948,972,438],()=>s(8745));module.exports=r})();