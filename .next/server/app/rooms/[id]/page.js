(()=>{var e={};e.id=556,e.ids=[556],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},8893:e=>{"use strict";e.exports=require("buffer")},4770:e=>{"use strict";e.exports=require("crypto")},7702:e=>{"use strict";e.exports=require("events")},2615:e=>{"use strict";e.exports=require("http")},8791:e=>{"use strict";e.exports=require("https")},8216:e=>{"use strict";e.exports=require("net")},5315:e=>{"use strict";e.exports=require("path")},8621:e=>{"use strict";e.exports=require("punycode")},6162:e=>{"use strict";e.exports=require("stream")},2452:e=>{"use strict";e.exports=require("tls")},7360:e=>{"use strict";e.exports=require("url")},1568:e=>{"use strict";e.exports=require("zlib")},6138:(e,a,t)=>{"use strict";t.r(a),t.d(a,{GlobalError:()=>n.a,__next_app__:()=>u,originalPathname:()=>m,pages:()=>c,routeModule:()=>p,tree:()=>d}),t(4701),t(4317),t(7629),t(8245);var r=t(3191),s=t(8716),i=t(7922),n=t.n(i),l=t(5231),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);t.d(a,o);let d=["",{children:["rooms",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,4701)),"C:\\dev\\kamunity-final\\src\\app\\rooms\\[id]\\page.tsx"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,3881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,4317)),"C:\\dev\\kamunity-final\\src\\app\\layout.tsx"],error:[()=>Promise.resolve().then(t.bind(t,7629)),"C:\\dev\\kamunity-final\\src\\app\\error.tsx"],"not-found":[()=>Promise.resolve().then(t.bind(t,8245)),"C:\\dev\\kamunity-final\\src\\app\\not-found.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,3881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["C:\\dev\\kamunity-final\\src\\app\\rooms\\[id]\\page.tsx"],m="/rooms/[id]/page",u={require:t,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/rooms/[id]/page",pathname:"/rooms/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},5348:(e,a,t)=>{Promise.resolve().then(t.bind(t,5543))},5543:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>h});var r=t(326),s=t(7577),i=t(8241),n=t(5329),l=t(9837),o=t(2065),d=t(188),c=t(8133);let m=({onUploadComplete:e,maxFileSize:a,acceptedTypes:t})=>{let[i,n]=(0,s.useState)(!1),l=e=>{e.preventDefault(),e.stopPropagation(),"dragenter"===e.type||"dragover"===e.type?n(!0):"dragleave"===e.type&&n(!1)};return r.jsx("div",{className:`border-2 border-dashed rounded-lg p-8 text-center transition-colors ${i?"border-primary-500 bg-primary-50":"border-gray-300 hover:border-primary-400"}`,onDragEnter:l,onDragLeave:l,onDragOver:l,onDrop:t=>{if(t.preventDefault(),t.stopPropagation(),n(!1),t.dataTransfer.files&&t.dataTransfer.files[0]){let r=t.dataTransfer.files[0];r.size<=a&&e(r)}},children:(0,r.jsxs)("div",{className:"space-y-4",children:[r.jsx("div",{className:"text-4xl",children:"\uD83D\uDCCE"}),(0,r.jsxs)("div",{children:[r.jsx(c.xv,{variant:"body-large",className:"mb-2",children:"Drop your file here or click to browse"}),(0,r.jsxs)(c.xv,{variant:"body-small",color:"muted",children:["Max size: ",Math.round(a/1024/1024),"MB"]})]}),r.jsx("input",{type:"file",onChange:t=>{if(t.target.files&&t.target.files[0]){let r=t.target.files[0];r.size<=a&&e(r)}},accept:t.join(","),className:"hidden",id:"file-upload"}),r.jsx("label",{htmlFor:"file-upload",className:"inline-flex items-center px-4 py-2 bg-primary-500 text-white rounded-lg hover:bg-primary-600 cursor-pointer transition-colors",children:"Choose File"})]})})};var u=t(1223);let p=({id:e,content:a,author:t,createdAt:d,conversationId:c,reactions:m=[],uploads:p=[],onReact:x,onRemoveReaction:h,onReply:g,className:v,showActions:y=!0,currentUserId:b="current-user"})=>{let[f,j]=(0,s.useState)(!1),D=a.length>300,N=e=>{switch(e){case"image":return"\uD83D\uDDBC️";case"document":return"\uD83D\uDCC4";case"video":return"\uD83C\uDFA5";case"audio":return"\uD83C\uDFB5";default:return"\uD83D\uDCCE"}},w=e=>"2.3 MB",C=t.id===b;return r.jsx(n.Zb,{className:(0,u.cn)("transition-all duration-200 hover:shadow-sm",v),children:r.jsx(n.aY,{className:"p-4",children:(0,r.jsxs)(i.kC,{align:"start",gap:"md",children:[r.jsx("div",{className:(0,u.cn)("w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0 text-sm font-medium",C?"bg-primary-100 text-primary-700":"bg-neutral-100 text-neutral-700"),children:t.avatarUrl?r.jsx("img",{src:t.avatarUrl,alt:t.name,className:"w-full h-full rounded-full object-cover"}):t.name.split(" ").map(e=>e.charAt(0)).join("").toUpperCase().slice(0,2)}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsxs)(i.kC,{align:"center",className:"mb-2",children:[r.jsx(o.xv,{weight:"medium",className:(0,u.cn)("mr-2",C?"text-primary-700":"text-neutral-900"),children:t.name}),r.jsx(o.xv,{variant:"body-small",color:"muted",children:new Date(d).toLocaleString()}),C&&r.jsx("span",{className:"ml-2 px-2 py-1 text-xs bg-primary-100 text-primary-700 rounded-full",children:"You"})]}),(0,r.jsxs)("div",{className:"mb-3",children:[r.jsx(o.xv,{className:"text-neutral-700 leading-relaxed",children:D&&!f?`${a.slice(0,300)}...`:a}),D&&r.jsx(l.z,{variant:"ghost",size:"sm",onClick:()=>j(!f),className:"mt-1 p-0 h-auto text-primary-600 hover:text-primary-700",children:f?"Show less":"Show more"})]}),p.length>0&&r.jsx("div",{className:"mb-3 space-y-2",children:p.map(e=>(0,r.jsxs)("div",{className:"inline-flex items-center px-3 py-2 bg-neutral-50 border border-neutral-200 rounded-lg mr-2 hover:bg-neutral-100 transition-colors cursor-pointer",children:[r.jsx("span",{className:"mr-2",children:N(e.fileType)}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[r.jsx(o.xv,{variant:"body-small",className:"text-neutral-700 truncate",children:e.filename}),r.jsx(o.xv,{variant:"caption",color:"muted",children:w(e.filename)})]}),r.jsx(l.z,{variant:"ghost",size:"sm",className:"ml-2 p-1 h-auto text-neutral-500 hover:text-neutral-700",title:"Download",children:"⬇️"})]},e.id))}),r.jsx("div",{className:"mb-3",children:r.jsx("div",{className:"text-sm text-gray-500",children:"\uD83D\uDC4D \uD83D\uDCA1 \uD83C\uDFAF reactions coming soon!"})}),y&&(0,r.jsxs)(i.kC,{align:"center",gap:"sm",children:[r.jsx(l.z,{variant:"ghost",size:"sm",onClick:()=>{g?.(e)},className:"text-neutral-500 hover:text-neutral-700 p-1 h-auto",children:"\uD83D\uDCAC Reply"}),r.jsx(l.z,{variant:"ghost",size:"sm",className:"text-neutral-500 hover:text-neutral-700 p-1 h-auto",title:"Share message",children:"\uD83D\uDD17 Share"}),C&&(0,r.jsxs)(r.Fragment,{children:[r.jsx(l.z,{variant:"ghost",size:"sm",className:"text-neutral-500 hover:text-neutral-700 p-1 h-auto",title:"Edit message",children:"✏️ Edit"}),r.jsx(l.z,{variant:"ghost",size:"sm",className:"text-red-500 hover:text-red-700 p-1 h-auto",title:"Delete message",children:"\uD83D\uDDD1️ Delete"})]})]})]})]})})})};var x=t(9822);let h=({params:e})=>{let[a,t]=(0,s.useState)(null),[c,h]=(0,s.useState)([]),[g,v]=(0,s.useState)([]),[y,b]=(0,s.useState)(!0),[f,j]=(0,s.useState)(!1),[D,N]=(0,s.useState)("");(0,s.useEffect)(()=>{let a={id:e.id,name:"Sustainable Urban Farming",purpose:"Creating resilient local food systems through community gardens and urban agriculture",description:"A collaborative space for planning, sharing resources, and coordinating urban farming initiatives across our community. We focus on practical solutions, knowledge sharing, and building connections between gardeners.",createdAt:new Date(Date.now()-2592e6),updatedAt:new Date(Date.now()-72e5),clubId:"club-1",status:"active",isPrivate:!1,maxMembers:50,tags:["urban-farming","sustainability","community-gardens","food-security"],pinnedContent:"\uD83C\uDF31 Welcome! Please introduce yourself and share your gardening experience. Check out our resource library in the uploads section.",lastActivity:new Date(Date.now()-18e5),messageCount:127,memberCount:23,club:{id:"club-1",name:"Urban Gardens Initiative",community:{id:"comm-1",name:"Climate Action Network"}}},r=[{id:"upload-1",filename:"garden-layout-plan.pdf",originalName:"Community Garden Layout Plan.pdf",fileType:"document",fileSize:2048e3,mimeType:"application/pdf",storageLocation:"/uploads/garden-layout-plan.pdf",moderationStatus:"approved",createdAt:new Date(Date.now()-1728e5),updatedAt:new Date(Date.now()-1728e5),uploaderId:"user-1",description:"Proposed layout for the new community garden on 5th Street",tags:["garden-design","layout","planning"],isPublic:!0,focusRoomId:e.id,uploader:{id:"user-1",name:"Sarah Chen",email:"sarah@example.com",avatarUrl:void 0}},{id:"upload-2",filename:"soil-test-results.jpg",originalName:"Soil Test Results - March 2024.jpg",fileType:"image",fileSize:1024e3,mimeType:"image/jpeg",storageLocation:"/uploads/soil-test-results.jpg",moderationStatus:"approved",createdAt:new Date(Date.now()-864e5),updatedAt:new Date(Date.now()-864e5),uploaderId:"user-2",description:"Latest soil test results showing pH and nutrient levels",tags:["soil-testing","data","analysis"],isPublic:!0,focusRoomId:e.id,uploader:{id:"user-2",name:"Marcus Johnson",email:"marcus@example.com",avatarUrl:void 0}}],s=[{id:"msg-1",content:"Great work on the soil testing, Marcus! The pH levels look perfect for tomatoes and peppers. Should we start planning the spring planting schedule?",createdAt:new Date(Date.now()-72e5),authorId:"user-1",conversationId:"conv-1",author:{id:"user-1",name:"Sarah Chen",email:"sarah@example.com",avatarUrl:void 0}},{id:"msg-2",content:"Absolutely! I was thinking we could do a community planting day next Saturday. I can bring seedlings from my greenhouse.",createdAt:new Date(Date.now()-36e5),authorId:"user-2",conversationId:"conv-1",author:{id:"user-2",name:"Marcus Johnson",email:"marcus@example.com",avatarUrl:void 0}},{id:"msg-3",content:"Count me in! I can help with the layout setup. The new garden design looks amazing in the PDF you shared, Sarah.",createdAt:new Date(Date.now()-18e5),authorId:"user-3",conversationId:"conv-1",author:{id:"user-3",name:"Elena Rodriguez",email:"elena@example.com",avatarUrl:void 0}}];t(a),h(r),v(s),b(!1)},[e.id]);let w=()=>{if(!D.trim())return;let e={id:`msg-${Date.now()}`,content:D,createdAt:new Date,authorId:"current-user",conversationId:"conv-1",author:{id:"current-user",name:"You",email:"you@example.com",avatarUrl:void 0}};v(a=>[...a,e]),N("")};return y?r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-primary-50 via-white to-secondary-50 flex items-center justify-center",children:r.jsx(o.xv,{children:"Loading focus room..."})}):a?r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-primary-50 via-white to-secondary-50",children:(0,r.jsxs)(i.W2,{size:"full",className:"py-6",children:[r.jsx(i.$0,{spacing:"sm",children:(0,r.jsxs)("div",{className:"mb-6",children:[r.jsx("div",{className:"flex items-center text-sm text-neutral-600 mb-4",children:(0,r.jsxs)(o.xv,{variant:"body-small",color:"muted",children:[a.club?.community?.name," → ",a.club?.name," → Focus Room"]})}),(0,r.jsxs)(i.kC,{justify:"between",align:"start",className:"mb-4",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)(i.kC,{align:"center",className:"mb-2",children:[r.jsx(o.X6,{level:1,className:"text-neutral-900 mr-3",children:a.name}),r.jsx("span",{className:(0,u.cn)("px-2 py-1 text-xs font-medium rounded-full border","active"===a.status?"bg-green-100 text-green-700 border-green-200":"dormant"===a.status?"bg-yellow-100 text-yellow-700 border-yellow-200":"bg-gray-100 text-gray-700 border-gray-200"),children:a.status}),a.isPrivate&&r.jsx("span",{className:"ml-2 px-2 py-1 text-xs font-medium rounded-full bg-purple-100 text-purple-700 border border-purple-200",children:"Private"})]}),r.jsx(o.xv,{className:"text-neutral-700 mb-3",children:a.purpose}),a.description&&r.jsx(o.xv,{variant:"body-small",color:"muted",className:"mb-3",children:a.description}),(0,r.jsxs)(i.kC,{align:"center",gap:"md",className:"mb-3",children:[r.jsx("div",{className:"flex items-center",children:(0,r.jsxs)(o.xv,{variant:"body-small",color:"muted",className:"mr-1",children:["\uD83D\uDC65 ",a.memberCount," members"]})}),r.jsx("div",{className:"flex items-center",children:(0,r.jsxs)(o.xv,{variant:"body-small",color:"muted",className:"mr-1",children:["\uD83D\uDCAC ",a.messageCount," messages"]})}),r.jsx("div",{className:"flex items-center",children:(0,r.jsxs)(o.xv,{variant:"body-small",color:"muted",className:"mr-1",children:["\uD83D\uDCC1 ",c.length," uploads"]})}),r.jsx("div",{className:"flex items-center",children:(0,r.jsxs)(o.xv,{variant:"body-small",color:"muted",children:["\uD83D\uDD52 Active ",Math.floor((Date.now()-a.lastActivity.getTime())/6e4)," min ago"]})})]}),r.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:a.tags.map(e=>r.jsx("span",{className:"px-2 py-1 text-xs bg-neutral-100 text-neutral-700 rounded-full",children:e},e))})]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[r.jsx(l.z,{variant:"primary",size:"sm",children:"Join Room"}),r.jsx(l.z,{variant:"outline",size:"sm",children:"Invite Members"})]})]}),a.pinnedContent&&r.jsx("div",{className:"bg-primary-50 border border-primary-200 rounded-lg p-4 mb-6",children:(0,r.jsxs)(o.xv,{variant:"body-small",className:"text-primary-800",children:["\uD83D\uDCCC ",a.pinnedContent]})})]})}),(0,r.jsxs)(i.rj,{cols:12,gap:"lg",children:[r.jsx("div",{className:"col-span-12 lg:col-span-3",children:r.jsx(d.Z,{onFilterChange:(e,a)=>{console.log("Room filter changed:",e,a)}})}),r.jsx("div",{className:"col-span-12 lg:col-span-6",children:r.jsx("div",{className:"space-y-6",children:(0,r.jsxs)(n.Zb,{children:[r.jsx(n.Ol,{children:(0,r.jsxs)(i.kC,{justify:"between",align:"center",children:[r.jsx(n.ll,{children:"Room Discussion"}),r.jsx(l.z,{variant:"outline",size:"sm",onClick:()=>j(!0),children:"Share File"})]})}),(0,r.jsxs)(n.aY,{children:[r.jsx("div",{className:"space-y-4 mb-4 max-h-96 overflow-y-auto",children:g.map(e=>r.jsx(p,{id:e.id,content:e.content,createdAt:e.createdAt,conversationId:a.id,author:{id:e.author?.id||"unknown",name:e.author?.name||"Unknown",avatarUrl:e.author?.avatarUrl||void 0},reactions:[],uploads:[],onReact:(e,a)=>{console.log("React to message:",e,a)},onReply:e=>{console.log("Reply to message:",e)}},e.id))}),(0,r.jsxs)("div",{className:"flex gap-2",children:[r.jsx("input",{type:"text",placeholder:"Type your message...",value:D,onChange:e=>N(e.target.value),onKeyPress:e=>"Enter"===e.key&&w(),className:"flex-1 px-3 py-2 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"}),r.jsx(l.z,{onClick:w,children:"Send"})]})]})]})})}),r.jsx("div",{className:"col-span-12 lg:col-span-3",children:r.jsx("div",{className:"space-y-6",children:(0,r.jsxs)(n.Zb,{children:[r.jsx(n.Ol,{children:r.jsx(n.ll,{children:"Recent Uploads"})}),r.jsx(n.aY,{children:r.jsx("div",{className:"space-y-4",children:0===c.length?r.jsx(o.xv,{variant:"body-small",color:"muted",className:"text-center py-4",children:"No uploads yet"}):c.map(e=>(0,r.jsxs)("div",{className:"border border-neutral-200 rounded-lg p-3",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,r.jsxs)("div",{className:"flex-1",children:[r.jsx(o.xv,{variant:"body-small",weight:"medium",className:"text-neutral-900",children:e.originalName}),(0,r.jsxs)(o.xv,{variant:"body-small",color:"muted",children:["by ",e.uploader?.name," • ",new Date(e.createdAt).toLocaleDateString()]})]}),r.jsx("span",{className:(0,u.cn)("px-2 py-1 text-xs rounded-full","image"===e.fileType?"bg-green-100 text-green-700":"document"===e.fileType?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700"),children:e.fileType})]}),e.description&&r.jsx(o.xv,{variant:"body-small",className:"text-neutral-700 mb-2",children:e.description}),r.jsx("div",{className:"flex flex-wrap gap-1 mb-2",children:e.tags.map(e=>r.jsx("span",{className:"px-1 py-0.5 text-xs bg-neutral-100 text-neutral-600 rounded",children:e},e))}),r.jsx("div",{className:"text-sm text-gray-500 mt-2",children:"\uD83D\uDC4D \uD83D\uDCA1 \uD83C\uDFAF reactions coming soon!"})]},e.id))})})]})})})]}),f&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[r.jsx("div",{className:"bg-gradient-to-r from-primary-50 to-secondary-50 p-6 rounded-t-lg",children:(0,r.jsxs)(i.kC,{justify:"between",align:"start",className:"mb-4",children:[r.jsx("div",{className:"flex-1",children:r.jsx(x.default,{variant:"inline",expression:"excited",size:"md",title:"\uD83D\uDCCE Share Something Amazing!",message:"Ready to contribute to this room? I'm excited to see what you'll share with the community!"})}),r.jsx("button",{onClick:()=>j(!1),className:"text-neutral-400 hover:text-neutral-600 transition-colors ml-4 p-1",children:r.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("div",{className:"mb-6",children:[r.jsx(o.xv,{variant:"body-large",className:"mb-2 font-medium",children:"What would you like to share? \uD83C\uDF1F"}),r.jsx(o.xv,{variant:"body-small",color:"muted",children:"Upload documents, images, or files that will help move this room's goals forward. Your contributions make a real difference!"})]}),r.jsx(m,{onUploadComplete:e=>{let a={id:Date.now().toString(),filename:e.name,originalName:e.name,fileType:e.type.startsWith("image/")?"image":"document",fileSize:e.size,mimeType:e.type,storageLocation:`/uploads/${e.name}`,moderationStatus:"approved",createdAt:new Date,updatedAt:new Date,uploaderId:"current-user-id",tags:[],isPublic:!0};t(e=>e?{...e,uploads:[...e.uploads||[],a]}:null),j(!1)},maxFileSize:10485760,acceptedTypes:["image/*","application/pdf",".doc",".docx"]}),(0,r.jsxs)("div",{className:"mt-6 p-4 bg-primary-50 rounded-lg border border-primary-100",children:[r.jsx(o.xv,{variant:"body-small",className:"font-medium text-primary-700 mb-2",children:"\uD83D\uDCA1 Kai's Tips:"}),(0,r.jsxs)("ul",{className:"text-sm text-primary-600 space-y-1",children:[r.jsx("li",{children:"• Images and PDFs work great for sharing ideas"}),r.jsx("li",{children:"• Documents help organize thoughts and plans"}),r.jsx("li",{children:"• Keep files under 10MB for best performance"}),r.jsx("li",{children:"• Add a quick description when you upload!"})]})]})]})]})})]})}):r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-primary-50 via-white to-secondary-50 flex items-center justify-center",children:r.jsx(o.xv,{children:"Focus room not found"})})}},4701:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>r});let r=(0,t(8570).createProxy)(String.raw`C:\dev\kamunity-final\src\app\rooms\[id]\page.tsx#default`)}};var a=require("../../../webpack-runtime.js");a.C(e);var t=e=>a(a.s=e),r=a.X(0,[948,76,74,188],()=>t(6138));module.exports=r})();